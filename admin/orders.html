<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ó–∞–∫–∞–∑—ã - QolayKZ Admin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="css/admin.css">
</head>
<body>
  <div class="admin-layout">
    <aside class="admin-sidebar">
      <div class="sidebar-header">
        <h1>QolayKZ Admin</h1>
      </div>
      <nav class="sidebar-nav">
        <a href="index.html" class="nav-item" data-page="dashboard">
          <i class="fas fa-chart-line"></i> –ì–ª–∞–≤–Ω–∞—è
        </a>
        <a href="owners.html" class="nav-item" data-page="owners">
          <i class="fas fa-user-tie"></i> –í–ª–∞–¥–µ–ª—å—Ü—ã
        </a>
        <a href="restaurants.html" class="nav-item" data-page="restaurants">
          <i class="fas fa-building"></i> –†–µ—Å—Ç–æ—Ä–∞–Ω—ã
        </a>
        <a href="staff.html" class="nav-item" data-page="staff">
          <i class="fas fa-users"></i> –ü–µ—Ä—Å–æ–Ω–∞–ª
        </a>
        <a href="tables.html" class="nav-item" data-page="tables">
          <i class="fas fa-chair"></i> –°—Ç–æ–ª—ã
        </a>
        <a href="categories.html" class="nav-item" data-page="categories">
          <i class="fas fa-folder"></i> –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
        </a>
        <a href="products.html" class="nav-item" data-page="products">
          <i class="fas fa-utensils"></i> –ü—Ä–æ–¥—É–∫—Ç—ã
        </a>
        <a href="banners.html" class="nav-item" data-page="banners">
          <i class="fas fa-bullseye"></i> –ë–∞–Ω–Ω–µ—Ä—ã
        </a>
        <a href="social-links.html" class="nav-item" data-page="social-links">
          <i class="fas fa-share-alt"></i> –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
        </a>
        <a href="images.html" class="nav-item" data-page="images">
          <i class="fas fa-images"></i> –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        </a>
        <a href="orders.html" class="nav-item active" data-page="orders">
          <i class="fas fa-box"></i> –ó–∞–∫–∞–∑—ã
        </a>
        <a href="reviews.html" class="nav-item" data-page="reviews">
          <i class="fas fa-star"></i> –û—Ç–∑—ã–≤—ã
        </a>
      </nav>
    </aside>

    <main class="admin-main">
      <header class="admin-header">
        <h2>–ó–∞–∫–∞–∑—ã</h2>
        <div class="header-actions">
          <span id="user-info" style="margin-right: 16px; color: #666;"></span>
          <div style="display: flex; align-items: center; gap: 12px;">
            <input 
              type="text" 
              id="date-range-input" 
              class="date-range-input" 
              placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É"
              readonly
              onclick="toggleDatePicker()"
            />
            <button class="btn-filter" id="filter-toggle-btn" onclick="toggleFilterPanel()">
              üîç –§–∏–ª—å—Ç—Ä
            </button>
          </div>
          <div>
            <button class="btn btn-secondary" onclick="loadOrders()">
              üîÑ –û–±–Ω–æ–≤–∏—Ç—å
            </button>
          </div>
        </div>
      </header>

      <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
      <div id="filter-panel" class="filter-panel" style="display: none;">
        <div class="filter-panel-content">
          <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
          <div class="filter-categories">
            <div 
              class="filter-category" 
              data-category="table"
              onclick="selectFilterCategory('table')"
            >
              <span>–ù–æ–º–µ—Ä —Å—Ç–æ–ª–∞</span>
              <span class="filter-badge" id="table-badge" style="display: none;">0</span>
            </div>
            <div 
              class="filter-category" 
              data-category="amount"
              onclick="selectFilterCategory('amount')"
            >
              <span>–°—É–º–º–∞</span>
              <span class="filter-badge" id="amount-badge" style="display: none;">0</span>
            </div>
            <div 
              class="filter-category" 
              data-category="payment"
              onclick="selectFilterCategory('payment')"
            >
              <span>–û–ø–ª–∞—Ç–∞</span>
              <span class="filter-badge" id="payment-badge" style="display: none;">0</span>
            </div>
            <div 
              class="filter-category" 
              data-category="status"
              onclick="selectFilterCategory('status')"
            >
              <span>–°—Ç–∞—Ç—É—Å</span>
              <span class="filter-badge" id="status-badge" style="display: none;">0</span>
            </div>
            <div 
              class="filter-category" 
              data-category="date"
              onclick="selectFilterCategory('date')"
            >
              <span>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</span>
              <span class="filter-badge" id="date-badge" style="display: none;">0</span>
            </div>
            <div class="filter-clear-all" onclick="clearAllFilters()">
              –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
            </div>
          </div>

          <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –æ–ø—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
          <div class="filter-options" id="filter-options">
            <div class="filter-placeholder">
              –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ñ–∏–ª—å—Ç—Ä–∞
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã -->
      <div id="date-picker-modal" class="date-picker-modal" style="display: none;" onclick="event.stopPropagation()">
        <div class="date-picker-content">
          <div class="date-picker-header">
            <button onclick="changeMonth(-1)">‚Äπ</button>
            <div>
              <select id="month-select" onchange="updateCalendar()"></select>
              <select id="year-select" onchange="updateCalendar()"></select>
            </div>
            <button onclick="changeMonth(1)">‚Ä∫</button>
          </div>
          <div class="date-picker-calendar" id="calendar-grid"></div>
          <div class="date-picker-actions">
            <button class="btn btn-secondary" onclick="closeDatePicker()">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" onclick="applyDateRange()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
          </div>
        </div>
      </div>

      <div class="admin-content">
        <div class="kanban-board" id="kanban-board">
          <!-- –ö–æ–ª–æ–Ω–∫–∞: –ù–æ–≤—ã–π -->
          <div class="kanban-column" data-status="ACCEPTED">
            <div class="kanban-column-header">
              <div class="kanban-column-title">
                <span class="kanban-grip">‚ãÆ‚ãÆ</span>
                <span>–ù–æ–≤—ã–π</span>
              </div>
              <span class="kanban-count" id="count-ACCEPTED">0</span>
            </div>
            <div class="kanban-column-content" data-status="ACCEPTED" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
          <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
          </div>

          <!-- –ö–æ–ª–æ–Ω–∫–∞: –ì–æ—Ç–æ–≤–∏—Ç—Å—è -->
          <div class="kanban-column" data-status="COOKING">
            <div class="kanban-column-header">
              <div class="kanban-column-title">
                <span class="kanban-grip">‚ãÆ‚ãÆ</span>
                <span>–ì–æ—Ç–æ–≤–∏—Ç—Å—è</span>
              </div>
              <span class="kanban-count" id="count-COOKING">0</span>
            </div>
            <div class="kanban-column-content" data-status="COOKING" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
            </div>
          </div>

          <!-- –ö–æ–ª–æ–Ω–∫–∞: –ì–æ—Ç–æ–≤–æ -->
          <div class="kanban-column" data-status="READY">
            <div class="kanban-column-header">
              <div class="kanban-column-title">
                <span class="kanban-grip">‚ãÆ‚ãÆ</span>
                <span>–ì–æ—Ç–æ–≤–æ</span>
              </div>
              <span class="kanban-count" id="count-READY">0</span>
            </div>
            <div class="kanban-column-content" data-status="READY" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
            </div>
          </div>

          <!-- –ö–æ–ª–æ–Ω–∫–∞: –û—Ç–º–µ–Ω–µ–Ω -->
          <div class="kanban-column" data-status="CANCELED">
            <div class="kanban-column-header">
              <div class="kanban-column-title">
                <span class="kanban-grip">‚ãÆ‚ãÆ</span>
                <span>–û—Ç–º–µ–Ω–µ–Ω</span>
              </div>
              <span class="kanban-count" id="count-CANCELED">0</span>
            </div>
            <div class="kanban-column-content" data-status="CANCELED" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ -->
  <div id="order-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 800px;">
      <div class="modal-header">
        <h3>–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h3>
        <button class="modal-close" onclick="closeOrderModal()">√ó</button>
      </div>
      <div class="modal-body" id="order-details">
        <!-- –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
      </div>
    </div>
  </div>

  <script src="../config.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/api.js"></script>
  <script src="../js/auth.js"></script>
  <script src="js/admin-auth.js"></script>
  <script src="js/admin-api.js"></script>
  <!-- Socket.io client library -->
  <script src="https://cdn.socket.io/4.8.3/socket.io.min.js"></script>
  <!-- WebSocket client for orders -->
  <script src="js/orders-websocket.js"></script>
  <script src="js/orders.js"></script>
</body>
</html>


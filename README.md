# QolayKZ Frontend - MVP

Простой фронтенд для тестирования MVP функциональности QR-меню.

## Структура

- `index.html` - Главная страница (редирект на guests.html)
- `guests.html` - Экран выбора количества гостей
- `menu.html` - Экран меню с категориями и поиском
- `product-detail.html` - Детальная страница блюда
- `css/styles.css` - Общие стили
- `js/api.js` - API клиент
- `js/utils.js` - Утилиты
- `js/guests.js` - Логика экрана выбора гостей
- `js/menu.js` - Логика экрана меню
- `js/product-detail.js` - Логика детальной страницы
- `config.js` - Конфигурация (API URL)

## Запуск

1. Убедитесь, что backend запущен на `http://localhost:3000`

2. Откройте `index.html` или `guests.html?table={qrToken}` в браузере

   Пример:
   ```
   guests.html?table=abc123def456...
   ```

3. Для тестирования можно использовать любой QR токен из базы данных (таблица `tables`, поле `qr_token_hash`)

## Использование

1. **Выбор количества гостей** (`guests.html`)
   - Откройте страницу с QR токеном в URL: `?table={token}`
   - Выберите количество гостей (1-20)
   - Нажмите "Продолжить"
   - Создается корзина и устанавливается количество гостей

2. **Просмотр меню** (`menu.html`)
   - Автоматически загружается после выбора гостей
   - Отображается номер стола сверху
   - Слева - список категорий
   - Справа - карточки блюд
   - Поисковая строка для фильтрации
   - Кнопка "Добавить" на каждой карточке

3. **Детальная страница блюда** (`product-detail.html`)
   - Открывается при клике на карточку блюда
   - Показывает изображение, название, описание, цену
   - Можно выбрать количество перед добавлением в корзину
   - Кнопка "Назад" для возврата в меню

## API Endpoints

Фронтенд использует следующие API endpoints:

- `POST /public/cart` - Создание корзины
- `POST /public/cart/:sessionId/guests` - Установка количества гостей
- `GET /public/menu?table={token}` - Получение меню
- `GET /public/cart/:sessionId` - Получение корзины
- `POST /public/cart/:sessionId/items` - Добавление товара в корзину

## Настройка API URL

По умолчанию используется `http://localhost:3000`.

Для изменения откройте консоль браузера и выполните:

```javascript
localStorage.setItem('API_BASE_URL', 'http://your-api-url:port');
```

Затем перезагрузите страницу.

## Локальное хранилище

Приложение использует `localStorage` для хранения:

- `cart_session_id` - ID сессии корзины
- `table_token` - QR токен стола
- `table_number` - Номер стола
- `restaurant_name` - Название ресторана
- `API_BASE_URL` - URL API (опционально)

## Особенности

- **Мобильная адаптация**: Адаптивный дизайн для мобильных устройств
- **Поиск**: Поиск по названию и описанию блюд
- **Категории**: Фильтрация блюд по категориям
- **Корзина**: Session-based корзина (хранится на сервере в Redis)

## Troubleshooting

### Ошибка "QR токен стола не найден"
- Проверьте, что в URL есть параметр `?table={token}`
- Убедитесь, что токен существует в базе данных

### Ошибка "Сессия не найдена"
- Вернитесь на экран выбора гостей
- Убедитесь, что backend запущен и доступен

### Ошибка "Не удалось загрузить меню"
- Проверьте подключение к backend
- Убедитесь, что QR токен валидный
- Проверьте консоль браузера на наличие ошибок

